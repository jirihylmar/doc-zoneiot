version: 1.0
frontend:
  phases:
    preBuild:
      commands:
        - python3 -m pip install --upgrade pip
        - python3 -m pip install -r requirements.txt --user
        - export PATH="/root/.local/bin:$PATH"
        - git config --global safe.directory /codebuild/output/src*/src/*
    build:
      commands:
        - echo "Python path:" && which python3
        - echo "Mkdocs path:" && which mkdocs
        - echo "Installed packages:" && cat pip_versions.txt
        - mkdocs build --verbose
  artifacts:
    baseDirectory: site
    files:
      - '**/*'
  cache:
    paths:
      - ~/.cache/pip
      - ~/.local/lib/python3.10/site-packages